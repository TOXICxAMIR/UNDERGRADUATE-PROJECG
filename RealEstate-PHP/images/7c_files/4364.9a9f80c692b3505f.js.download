(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4364],{42542:function(t,e,n){"use strict";n.d(e,{Y:function(){return r}});var a=n(31845);function r(t){return(0,a.numberFormat)("en",Math.round(t))}},77299:function(t,e,n){"use strict";n.d(e,{v:function(){return s}});var a=n(11163),r=n(67294);let s=()=>{let t=(0,a.useRouter)(),[e,n]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=()=>n(!0),a=()=>n(!1);return t.events.on("routeChangeStart",e),t.events.on("routeChangeComplete",a),t.events.on("routeChangeError",a),()=>{t.events.off("routeChangeStart",e),t.events.off("routeChangeComplete",a),t.events.off("routeChangeError",a)}},[]),e}},88075:function(t,e,n){"use strict";n.d(e,{O:function(){return l}});var a=n(85893),r=n(31845),s=n(4519),i=n(18903),o=n(86926),c=n.n(o);let l=t=>{let{className:e}=t,{t:n}=(0,i.$)();return(0,a.jsxs)("p",{className:(0,r.domClassMerge)(c()["data-guru-brand"],e),children:[n("DataGuruBranding_PoweredBy"),(0,a.jsxs)("span",{className:c()["data-guru-brand__logo"],children:[n("ExploreInsights_DataGuru")," ",(0,a.jsx)(s.IconDataguru,{className:c()["data-guru-brand__icon"]})]})]})}},9902:function(t,e,n){"use strict";n.d(e,{x:function(){return o}});var a=n(85893),r=n(31845),s=n(7495),i=n.n(s);let o=t=>(0,a.jsx)("div",{"data-testid":"skeleton-template",style:{width:t.width,height:t.height},className:(0,r.domClassMerge)(i().container,t.className,"shine-animation")})},4364:function(t,e,n){"use strict";let a;n.r(e),n.d(e,{NewProjectsDetailsHistoricalTransactionsComponent:function(){return R}});var r=n(85893),s=n(67294),i=n(18903),o=n(8708),c=n(31845),l=n(84543),u=n(23958),_=n(5152),d=n.n(_),m=n(43030),h=n(77299),g=n(88075),b=n(9902);let f=new Map,p=new WeakMap,v=0,y=t=>{(0,s.useEffect)(()=>{let e=()=>{t()};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[t])},w=()=>{let t=(0,s.useRef)(null),e=(0,s.useRef)(null),n=(0,s.useRef)(null),a=(0,s.useRef)(0),r=(0,s.useCallback)(()=>{t.current||(t.current=new Date)},[]),i=(0,s.useCallback)(()=>{if(t.current){var r;e.current=new Date;let s=e.current.getTime()-t.current.getTime();n.current=(null!==(r=n.current)&&void 0!==r?r:0)+Math.round(s/1e3),a.current=0,t.current=null}},[t.current,n.current]),o=(0,s.useCallback)(()=>{if(t.current){var e;i(),a.current=null!==(e=n.current)&&void 0!==e?e:0}},[t.current,i,n.current]);return{getEndTime:()=>e.current,getStartTime:()=>t.current,getSecondsElapsed:()=>n.current,getPauseTime:()=>a.current,startTimer:r,endTimer:i,pauseTimer:o}},j=t=>{let{children:e,className:n,onExit:i}=t,o=(0,s.useRef)(w()),{ref:c,inView:l}=function({threshold:t,delay:e,trackVisibility:n,rootMargin:r,root:i,triggerOnce:o,skip:c,initialInView:l,fallbackInView:u,onChange:_}={}){let d=s.useRef(),m=s.useRef(),[h,g]=s.useState({inView:!!l});m.current=_;let b=s.useCallback(s=>{void 0!==d.current&&(d.current(),d.current=void 0),!c&&s&&(d.current=function(t,e,n={},r=a){if(void 0===window.IntersectionObserver&&void 0!==r){let a=t.getBoundingClientRect();return e(r,{isIntersecting:r,target:t,intersectionRatio:"number"==typeof n.threshold?n.threshold:0,time:0,boundingClientRect:a,intersectionRect:a,rootBounds:a}),()=>{}}let{id:s,observer:i,elements:o}=function(t){let e=Object.keys(t).sort().filter(e=>void 0!==t[e]).map(e=>{var n;return`${e}_${"root"===e?(n=t.root)?(p.has(n)||(v+=1,p.set(n,v.toString())),p.get(n)):"0":t[e]}`}).toString(),n=f.get(e);if(!n){let a;let r=new Map,s=new IntersectionObserver(e=>{e.forEach(e=>{var n;let s=e.isIntersecting&&a.some(t=>e.intersectionRatio>=t);t.trackVisibility&&void 0===e.isVisible&&(e.isVisible=s),null==(n=r.get(e.target))||n.forEach(t=>{t(s,e)})})},t);a=s.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:s,elements:r},f.set(e,n)}return n}(n),c=o.get(t)||[];return o.has(t)||o.set(t,c),c.push(e),i.observe(t),function(){c.splice(c.indexOf(e),1),0===c.length&&(o.delete(t),i.unobserve(t)),0===o.size&&(i.disconnect(),f.delete(s))}}(s,(t,e)=>{g({inView:t,entry:e}),m.current&&m.current(t,e),e.isIntersecting&&o&&d.current&&(d.current(),d.current=void 0)},{root:i,rootMargin:r,threshold:t,trackVisibility:n,delay:e},u))},[Array.isArray(t)?t.toString():t,i,r,o,c,n,u,e]);s.useEffect(()=>{d.current||!h.entry||o||c||g({inView:!!l})});let y=[b,h.inView,h.entry];return y.ref=y[0],y.inView=y[1],y.entry=y[2],y}();return(0,s.useEffect)(()=>{l?o.current.startTimer():o.current.pauseTimer()},[l,o]),(0,s.useEffect)(()=>{let t=()=>{"hidden"===document.visibilityState?o.current.pauseTimer():o.current.startTimer()};return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}},[o]),y(()=>{o.current.endTimer(),i(o.current.getSecondsElapsed())}),(0,r.jsx)("div",{className:n,ref:c,children:e})};var x=n(42542);let N=(t,e)=>{let{t:n,isRTL:a}=(0,i.$)(),s=t.map(t=>{let{bedrooms:e,propertyType:a}=t;return 0===e?"".concat(n("Studio")," ").concat(a.toLowerCase()):"".concat(n("Bed",{bedrooms:e})," ").concat(a).toLowerCase()});return e?(()=>{let e=t.map(t=>{let{rentalYield:e}=t;return(0,r.jsxs)(r.Fragment,{children:[(0,x.Y)(e)," %"]})}),a=t.map(t=>{let{price:e}=t;return(0,r.jsx)(r.Fragment,{children:(0,x.Y)(e)})});return[{header:n("NewProjects_TransactionBedroomsType"),content:s},{header:n("NewProjects_EstimatedRentRentalYield"),content:e},{header:n("NewProjects_EstimatedRent"),content:a}]})():(()=>{let e=t.map(t=>{let{price:e}=t;return(0,r.jsx)(r.Fragment,{children:(0,x.Y)(e)})}),i=t.map(t=>{let{propertySize:e}=t;return(0,r.jsx)(r.Fragment,{children:(0,x.Y)(e)})}),o=t.map(t=>{let{transactionDate:e}=t;return(0,r.jsx)(r.Fragment,{children:(0,c.dateToLocale)(e,a)})});return[{header:n("NewProjects_TransactionBedroomsType"),content:s},{header:n("currency-code/AED"),content:e},{header:n("NewProjects_TransactionArea"),content:i},{header:n("NewProjects_TransactionDateSold"),content:o}]})()};var k=n(71355),T=n.n(k);let C=d()(()=>n.e(5669).then(n.bind(n,35669)).then(t=>t.ExpandableTextComponent),{loadableGenerated:{webpack:()=>[35669]},ssr:!0}),E=t=>{let{isRental:e=!1,location:n,className:a,title:_,disclaimer:d,cta:f,list:p}=t,v=(0,h.v)(),{t:y}=(0,i.$)(),w=(0,s.useMemo)(()=>"mobile"===m.Y,[]),{ref:x}=(0,c.useImpression)(()=>w&&(0,o.X)({group:"new-projects-detail",type:e?"onScrollRentalTable":"onScrollSaleTable"}));if(v)return(0,r.jsx)(b.x,{width:"100%",height:"15rem"});let k=N(p,e);return(0,r.jsx)("section",{ref:x,className:a,children:(0,r.jsxs)(j,{className:T()["transaction-list__container"],onExit:t=>{(0,o.X)({group:"new-projects-detail",type:e?"onExitRentalTable":"onExitSaleTable",payload:t})},children:[(0,r.jsxs)("div",{className:T()["transaction-list__heading"],children:[(0,r.jsx)("h2",{className:T()["transaction-list__title"],children:_}),e&&(0,r.jsx)("span",{className:T()["transaction-list__info"],children:y("NewProjects_TransactionsRentInfo",{location:n.name})})]}),(0,r.jsx)("div",{className:T()["transaction-list__table-container"],children:(0,r.jsx)(u.i,{className:(0,c.domClassMerge)(T()["transaction-list__table"],{[T()["transaction-list__table--sale"]]:!e,[T()["transaction-list__table--rent"]]:e}),headerClassName:T()["transaction-list__table-header"],bodyClassName:T()["transaction-list__table-body"],columns:k})}),(0,r.jsxs)("div",{className:T()["transaction-list__footer"],children:[(0,r.jsx)(l.Link,{href:f.link,theme:"secondary","data-testid":"transactions-cta",className:T()["transaction-list__cta"],onClick:()=>(0,o.X)({group:"new-projects-detail",type:e?"onRentalCtaClick":"onSaleCtaClick"}),children:f.text}),(0,r.jsx)(g.O,{className:T()["transaction-list__data-guru"]})]}),w?(0,r.jsx)(C,{id:e?"rent":"sold",text:d,className:(0,c.domClassMerge)(T()["transaction-list__disclaimer"],T()["transaction-list__disclaimer--expandable"])}):(0,r.jsx)("p",{"data-testid":"table-disclaimer",className:T()["transaction-list__disclaimer"],children:d})]})})},R=t=>{let{project:e,community:n,className:a,historicalTransactions:s}=t,{t:o,locale:c}=(0,i.$)();return(0,r.jsxs)("div",{"data-testid":"transaction-history-tables",children:[e&&s.saleTransactions.length>0&&(0,r.jsx)(E,{location:e,className:a,list:s.saleTransactions,title:o("NewProjects_TransactionsSaleTitle",{location:e.name}),disclaimer:o("NewProjects_TransactionsSaleDisclaimer"),cta:{text:o("NewProjects_TransactionsSaleCta",{location:e.name}),link:"/".concat(c,"/transactions/buy/").concat(e.city_slug_en,"/").concat(e.slug_en)}}),n&&s.rentTransactions.length>0&&(0,r.jsx)(E,{location:n,isRental:!0,className:a,list:s.rentTransactions,title:o("NewProjects_TransactionsRentTitle"),disclaimer:o("NewProjects_TransactionsRentDisclaimer"),cta:{text:o("NewProjects_TransactionsRentCta",{location:n.name}),link:"/".concat(c,"/transactions/rent/").concat(n.city_slug_en,"/").concat(n.slug_en)}})]})}},86926:function(t){t.exports={"data-guru-brand":"styles_data-guru-brand__JcqIk","data-guru-brand__icon":"styles_data-guru-brand__icon__hvSzg","data-guru-brand__logo":"styles_data-guru-brand__logo__ttMuw"}},7495:function(t){t.exports={container:"skeleton_container__GsunQ"}},71355:function(t){t.exports={"transaction-list__disclaimer":"styles_desktop_transaction-list__disclaimer__EZR2X","transaction-list__container":"styles_desktop_transaction-list__container__0m1Uw","transaction-list__data-guru":"styles_desktop_transaction-list__data-guru__291l1","transaction-list__cta":"styles_desktop_transaction-list__cta__HqgkJ","transaction-list__footer":"styles_desktop_transaction-list__footer__wze5L","transaction-list__title":"styles_desktop_transaction-list__title__5MUuy","transaction-list__info":"styles_desktop_transaction-list__info__bUa4X","transaction-list__table-header":"styles_desktop_transaction-list__table-header__shR2X","transaction-list__table-body":"styles_desktop_transaction-list__table-body__2vdbL","transaction-list__heading":"styles_desktop_transaction-list__heading__c4cNZ","transaction-list__table-container":"styles_desktop_transaction-list__table-container__QnQSa","transaction-list__table":"styles_desktop_transaction-list__table__V2G8S","transaction-list__table--sale":"styles_desktop_transaction-list__table--sale__iLMVY"}}}]);